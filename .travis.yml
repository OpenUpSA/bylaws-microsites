language: ruby
sudo: false
rvm:
  - 2.3
env:
  global:
    # AWS_ACCESS_KEY_ID for S3 deployment
    - secure: "Ktg5l/gSjBu/YfF0fkpAqKYbAawYCWYU597BeaKYv4I0O9VDU74TJvq95ZKG4vpvLjrw/7S/+2k+U76lHXZdL8fNYUcOg2Pwt98cuaZ33ZBbgbBT03dWgJ4rN+hSuRCqCgsI45EOEY+GHqlk5txjhc93stpGjYaBEBOlRMwOlR05uQZEiBKfHQ0mtGc3JDLOiI/miPphhyJmvnCQpOfj8FWWhBix1VY6CRt8IvQmSVnYYSpJ3VKvaQLGI7O9HjpwJrihVPyW2QrTJG9vIMnsWyzCKiUByzY4nOjDnGDuWBTSipasadNqa0dzlpq0sB2eqIuC1naRN4qOKvBSbykVWjt76myzdtBWINk6eys7Au7aHxb+agmqBI8CeM5lxb2i5fNfAuXAow2SxkAphbMYGkl5NFy6luRnWRJD9D0oxslo4wGFPjABPPqOmgyXyw6+cfIPiNOhRdQwSkQJsuk/Ti9q5M1PEylSlIdQkmO84qlWgIJgQUE+dRU0m1L05Uk+z33hAYYG6o1mEnxSkbjnaF6UluKuTtVDGAnE6tPboUmMqiPqsBSG6aan/zj9dmy+LpR018HNZPHySlY3B3plYvgkCTihztV8bO0Zv+ZoOTD9y5BsYvyrVzaK2XYFQQYhSQxQVi0V+WRT3AUVJfBkcTYJuXzn52/XsU1ABi5BIiU="
    # AWS_SECRET_ACCESS_KEY for S3 deployment
    - secure: "CXGejk6MuuQ297uROyyu7PCUD19y7OwEpRjGd1OfCw0gh6jwGwnOr8+AP6m77eca8EB75lKbPYW0XRkt7t4Z4V97V3NdWTXd74RPB2t1kgly/tCbfyET99TV9r4eBz6N4qPqkKIT8eOQeG1kZAZaPGJL109tBDSTZBy0/Q7ZWIPd6/fi3Ak57mgzqtynZj/75QiJQZLyI1+MLab1bOES/2Yrdx3Ad0/l6eV57wG1URiafaE2LWSxa3UeV9530DxW4At4KYG9OyptDrc5jDoizDx4+pFLtl6Cjp4AGkBTLt8hFUriYukHJhXKieApbbx3v2UuCWzKG67LCggRMd+AFJ3Yq4IFKwVZD12yGFI2iT+t0R/CZV/SUJSkHpKDa1L6yqjE9y2yMrjXRHo1Xvn9IHvTB0uhlQuDj6O11ZkWVwmT8NxKqLH9t3I0j4y+hQYHJ1kWGQlgjzaFwFM7A63Rf15ZkiUAwQ2pGLa/x+b0ECT8FKED9l77a/kjZCmOBCKOCzsD0wyt8pt7eajD2jjVymncslbVI7ixhI+F1rY3TpoCMIr4Da0rRr5f2R+gftj02WCeKaoMxjWXhS4JcuLqLaoRg5msmW9J836vZSA5WEuD8T5PpW3wY1fx6b32qG7j3OxKJ6DnoDC+2bW5tZCu81TP7+0mE7Nk23SNwyI7c68="
    # INDIGO_API_AUTH_TOKEN
    - secure: "bhRU8+9XqdPWG6V/dKhrCKu3L8dZ2D/CX3MfKIgexJ8GrcFTyWp+Flo4O/f62SOmN0MtJvc2CJxuoe4fQzbfE+AQb33I0VRAFLnc2MWBE3AaB1Q4oao/AjzgKYvFgRQqHyLmLmPWEyAlg6e/507p77IgA15YeXPXTgiWuh+KLpv+lXN78ORyJaQrSxR3TpgRt/Kh2X4TCDlD8JRd8+HjWTLjl4epIofzwg543aZc1QNOwv5kYpxBrec0DTSxDuYZKYlQG0jRoJ5Q1HPcWWaMNtwNRmm4Bab9yU9jJAp90gvBWdxHE8v1WXVWAMwh8x62IUwG4rUwM7Mm0T5ctbg4xeTUmJZumyrIQuwS1yXnW3P/Hb+n66XnEp6VPwuRIFztMz+1aUaTBkBDmnoIlwrtSruD1WGLWYGYMlzfWPRGmsjmhKI6yWjKBD15I2XlKJbUav5FPi1WJWrlcSARd7kAVIRmPvhW26rwaQXtmqywgDyU+0iMvYMfbE3KG1sLzm1JerkENqj93kyf+lYkoIXUNu73zK2pXlYZFEEp0Jw1tMnYudDL1n8noszT3bXSqiGIWTGP2j8FIyCZJGUFKZjTkPsXF/Clv7SDPtSQtfnbDKB9AyoRgWVBQRouedWGMkqDpV1GpX6ZMnwmhKnyslvMOJMPoGMtOqo58RqVbhaGrKA="
  matrix:
    - REGION=ec443
    - REGION=wc011
    - REGION=wc033
script:
  - if [ "$TRAVIS_BRANCH" == "master" ]; then bundle exec rake deploy; else bundle exec rake build; fi
