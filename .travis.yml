language: ruby
sudo: false
rvm:
  - 2.6
env:
  global:
    # AWS_ACCESS_KEY_ID for S3 deployment
    - secure: "Ue59Vy6RQ/DYnqEXLGcQ9TIDlBE+CfSV81qkV3tohNMVkuGEkRdUt/X9CG6zq8O/CtfLl047IN/P7WtFFCvvyqQscVBGAiVDytDNj+7/dANeXkX23xx7v7dAtSRiUpZUKSYSWsLL1Au2H/CW2sBAK3KYqoqEuO+LGXoF3+HvdNySiuHZx0OZ3cv+BR2ylySX5m/EuqUV5/npuV7K/fm9Tm0M9UtdFfa4nEwHn+DPBJUJm9DlY5aDCG3u9WgXug6zLxGthD7sCumiCtyiavM0vcYz2OK5Z2Ad4DREUI5cBY8iN2zaITSAGeq0CBVHCsdG+5mAZkgCJmkozTaDHLvaXc3wSbGapHwR3j7Jtqms4FDS8go5jtWS/MEnNNu7sG2fCYcNgfGpVZ9FUpzbYZMdIKz7yXDTzjhBJSg6yqzldsbgYFZMrx9tPBorn94usyg7slQ6UnaT8sWANB0qbbXwEDrW681sVAsaeYiL8QmrARwxGttZfEu3V+mzJw4tkL1cSUyNPxzF44maDeBmHWpZ/rXDJQsOG1AR8roi0xPQa4Ivrk0sGrX2XleOVxbhAufveGvoZv662ijAeahuw/glyxFJm3iiLJy3qMXsbhkJMklfemjGlSVcbf1gfRBH4cbI0gVEsjZvEh/G0PUxkKuwqb4sjLMFlfrMB7AbDVC5eSs="
    # AWS_SECRET_ACCESS_KEY for S3 deployment
    - secure: "Hp/HsG4gpikXl0XTPMjEFqeYOmawqXGK+lbh5eUrPPIFCLZooqqJrxQa2c/LieTQgR5hG9NZ+S4NbX94b2T+N9iNnnKY4/Dtohvtiq1PslcjaWCt+zKIMB94W0R5gr+SCNul4GOL6hDsDV+WHDswy6hShO8mSRQRatYUm4eNaJ6kS5dKyTmgfzWi7hBXxsMXgmksTL8lueAKKQC2zyt66WNrbWoWltNooeM3ogDC3rfAgaZCNcGU7v07Ic+PlwOMISZINMj92L13f6GmwNcqqbmG16kHFd7+OjiP4WnG9X2J4Dyyw+/8wR8LyW/dSClI4w6Gk3r4RnNFziHvPqGj2G8j05emMfd4+exraKStiNE4soEMK2v2bejSXonFoeqymKxPpuZJNdnOVR89PtS8DXeMGBzI50ps4pK1WP5KfRep8ZGzw6jsZiBkViYs1eHbaqw91HiGvaWqDGejkf5jNuzpPWWDsaCwdi57Cm/FwaT/nfOGeTb5loWv0q4sO9j1OcOERigbt56tgGiH9wMWRC/yg2epwghwOq6bNWCf/1s+qAVD8jX9P0n1kPDPRx64gUdV4jpcvTehzaxnWcFg55Sddun04I9t0MGdYElCXL4XffbiqW45nF0P0nHgwnErN+emcXSMg4587eIPVHe8osCKhjd02z0lTJNp140Etxo="
    # INDIGO_API_AUTH_TOKEN
    - secure: "bhRU8+9XqdPWG6V/dKhrCKu3L8dZ2D/CX3MfKIgexJ8GrcFTyWp+Flo4O/f62SOmN0MtJvc2CJxuoe4fQzbfE+AQb33I0VRAFLnc2MWBE3AaB1Q4oao/AjzgKYvFgRQqHyLmLmPWEyAlg6e/507p77IgA15YeXPXTgiWuh+KLpv+lXN78ORyJaQrSxR3TpgRt/Kh2X4TCDlD8JRd8+HjWTLjl4epIofzwg543aZc1QNOwv5kYpxBrec0DTSxDuYZKYlQG0jRoJ5Q1HPcWWaMNtwNRmm4Bab9yU9jJAp90gvBWdxHE8v1WXVWAMwh8x62IUwG4rUwM7Mm0T5ctbg4xeTUmJZumyrIQuwS1yXnW3P/Hb+n66XnEp6VPwuRIFztMz+1aUaTBkBDmnoIlwrtSruD1WGLWYGYMlzfWPRGmsjmhKI6yWjKBD15I2XlKJbUav5FPi1WJWrlcSARd7kAVIRmPvhW26rwaQXtmqywgDyU+0iMvYMfbE3KG1sLzm1JerkENqj93kyf+lYkoIXUNu73zK2pXlYZFEEp0Jw1tMnYudDL1n8noszT3bXSqiGIWTGP2j8FIyCZJGUFKZjTkPsXF/Clv7SDPtSQtfnbDKB9AyoRgWVBQRouedWGMkqDpV1GpX6ZMnwmhKnyslvMOJMPoGMtOqo58RqVbhaGrKA="
  matrix:
    - REGION=buf
    - REGION=ec443
    - REGION=wc011
    - REGION=wc033
script:
  - if [ "$TRAVIS_BRANCH" == "master" ]; then bundle exec rake deploy; else bundle exec rake build; fi
